# Object Graphs and Structural Typing in Java

This gives Java a way to handle pieces of a graph in a type safe way without a lot of object
duplication. Types are determined at compile time through code generating annotations and are 
linked based on their structural type equivalent.

The annotation processor determines all the structurally equivalent types @TypeOf for each type 
and pairs them with the @StructuralType output type.

```java
public class Main {
  abstract class FooModel {
    abstract String getA();
    abstract String getB();
    abstract String getC();
  }

  @TypeOf(clazz = FooModel.class)
  public interface FooAInput {
    String getA();
  }
  @TypeOf(clazz = FooModel.class)
  public interface FooABInput {
    String getA();
    String getB();
  }
  @TypeOf(clazz = FooModel.class)
  public interface FooCInput {
    String getC();
  }
  //compile error, D is not a property of the model
  //@TypeOf(clazz = FooModel.class)
  //public interface FooDInput {
  //  String getD();
  //}

  //You add `implements St{name}`
  @StructuralType(clazz = FooModel.class)
  public static class FooAFragment implements StFooAFragment {
    public String getA() { return "A"; }
  }
  @StructuralType(clazz = FooModel.class)
  public static class FooABFragment implements StFooABFragment {
    public String getA() { return "A"; }
    public String getB() { return "B"; }
  }
  @StructuralType(clazz = FooModel.class)
  public static class FooCFragment implements StFooCFragment {
    public String getC() { return "C"; }
  }

  public static void main(String[] args) {
    print(new FooAFragment());
    print(new FooABFragment());
    //print(new FooCFragment()); //compile error
  }

  public static void print(FooAInput fooAInput) {
    System.out.println(fooAInput.getA());
    //System.out.println(fooInput.getB()); //compile error
    //System.out.println(fooInput.getC()); //compile error
  }
}

//This gets generated by the annotations:
interface StFooAFragment extends FooAInput {}
interface StFooABFragment extends FooAInput, FooABInput {}
interface StFooCFragment {}
```

This can be extended to non-trivial examples:
[tests/src/main/java/typekin/tests/example/TypekinAnnotation.java](tests/src/main/java/typekin/tests/example/TypekinAnnotation.java)

### Contributions
This work is based on https://github.com/tlamr/stjava
